<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.2.4/milligram.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lato|Poppins&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/rspective/voucherify.js@latest/dist/voucherify.min.js"
    ></script>

    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/rspective/voucherify.js@latest/dist/voucherify.min.css"
    />
  </head>
  <body>
    <div class="header-overlay">
      <div class="header-top">
        <div class="header-top-logo"></div>
        <nav>
          <div class="header-menu">
            <li class="menu-link">
              <a href="#top-categories" class="scroll">TOP CATEGORIES</a>
            </li>
            <li class="menu-link">
              <a href="#top-vouchers" class="scroll">TOP VOUCHERS</a>
            </li>
            <li class="menu-link">
              <a href="#premium-deals" class="scroll">PREMIUM DEALS</a>
            </li>
            <li class="menu-link">
              <a href="#all" class="scroll">OTHER COUPONS AVAILABLE</a>
            </li>
          </div>
        </nav>
      </div>

      <header>
        <div class="header-background-overlay">
          <div class="header-background-image">
            <div class="header-text">
              <h1 class="header-title">Voucherify Coupon Aggregate</h1>
              <p class="header-subtitle">
                Try out Voucherify Coupon Aggregate to save time and money while
                shopping. All you have to do is find the code that suits your
                needs best, make the purchase and become a fashion icon!
              </p>
            </div>
          </div>
        </div>
      </header>
    </div>

    <div
      class="section-overlay section-top-categories-overlay"
      id="top-categories"
    >
      <div class="name-section">
        <h2>TOP CATEGORIES</h2>
      </div>

      <div class="grid-field">
        <div class="grid-element">
          <div class="grid-image grid-popular-img1"></div>
          <div class="grid-inf">
            <span class="name-brand">SWIMWEAR</span>
            <span>20% off any swimwear bought before August 30th. </span>
            <span class="hidden-header">SWIMWEAR</span>
            <span class="hidden-code" id="hidden-code-unique1"> </span>
            <p class="hidden-content">
              20% off any swimwear bought before August 30th. Hurry up and get
              some tan!
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-popular-img2"></div>
          <div class="grid-inf">
            <span class="name-brand">SUNGLASSES </span>
            <span>Buy one pair and get another one for 50% off! </span>
            <span class="hidden-header">SUNGLASSES </span>
            <span class="hidden-code" id="hidden-code-unique2"></span>
            <p class="hidden-content">
              Buy one pair and get another one for 50% off!
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-popular-img3"></div>
          <div class="grid-inf">
            <span class="name-brand">SUMMER ACCESSORIES </span>
            <span>Special deal only for gift card holders.</span>
            <span class="hidden-header">
              SUMMER ACCESSORIES
            </span>
            <span class="hidden-code" id="hidden-code-unique3"></span>
            <p class="hidden-content">
              Special deal only for gift card holders. Get 15% off your total
              order when buying at least one item from the Accessories category.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>
      </div>
    </div>

    <div class="section-overlay section-top-vouchers-overlay" id="top-vouchers">
      <div class="name-section">
        <h2 class="text-white">Top vouchers</h2>
      </div>

      <div class="grid-field">
        <div class="grid-element">
          <div class="grid-image grid-top-img1"></div>
          <div class="grid-inf">
            <span class="name-brand">SHARING IS CARING </span>
            <span
              >Invite a friend to register on our app and both of you will
              receive 20% off your orders.
            </span>
            <span class="hidden-header">SHARING IS CARING </span>
            <span class="hidden-code">glRf5hYZ6v32T </span>
            <p class="hidden-content">
              Invite a friend to register on our app and both of you will
              receive 20% off your orders.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-top-img2"></div>
          <div class="grid-inf">
            <span class="name-brand">JOIN OUR NEWSLETTER </span>
            <span>25% off your order above 80$.</span>
            <span class="hidden-header">JOIN OUR NEWSLETTER</span>
            <span class="hidden-code">RV1624KLY0e22</span>
            <p class="hidden-content">
              Subscribe to our newsletter and enjoy not only the latest news but
              also 25% off your order above 80$.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-top-img3"></div>
          <div class="grid-inf">
            <span class="name-brand">SUMMER CLEARANCE SALE</span>
            <span
              >It’s summer and we’d like to offer you something special!</span
            >
            <span class="hidden-header">SUMMER CLEARANCE SALE</span>
            <span class="hidden-code">As8bh89yawSaf</span>
            <p class="hidden-content">
              It’s summer and we’d like to offer you something special! Check
              out this amazing deal and save up to 60% on our summer offer.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>
      </div>
    </div>

    <div
      class="section-overlay section-top-categories-overlay"
      id="premium-deals"
    >
      <div class="name-section">
        <h2>PREMIUM DEALS</h2>
      </div>

      <div class="grid-field">
        <div class="grid-element">
          <div class="grid-image grid-image-2"></div>
          <div class="grid-inf">
            <span class="name-brand">BIG ORDER - BIG DISCOUNT</span>
            <span
              >If your order exceeds 400$, we are going to offer you a 50$
              discount on all items.
            </span>
            <span class="hidden-header">BIG ORDER - BIG DISCOUNT</span>
            <span class="hidden-code">BBxx1Z6v32T</span>
            <p class="hidden-content">
              If your order exceeds 400$, we are going to offer you a 50$
              discount on all items.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-image-1"></div>
          <div class="grid-inf">
            <span class="name-brand">BECOME A PATREON</span>
            <span>Get up to 50% discount on the whole collection. </span>
            <span class="hidden-header">BECOME A PATREON</span>
            <span class="hidden-code">fm6022nvPrL6q</span>
            <p class="hidden-content">
              Promote our brand on your social media channels and get up to 50%
              discount on the whole collection.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>

        <div class="grid-element">
          <div class="grid-image grid-image-3"></div>
          <div class="grid-inf">
            <span class="name-brand">DRESS AND SAVE MONEY LIKE A V.I.P</span>
            <span>Get 20% off for one of the items of your choice. </span>
            <span class="hidden-header">DRESS AND SAVE MONEY LIKE A V.I.P</span>
            <span class="hidden-code">gp1023dBBxWMq</span>
            <p class="hidden-content">
              Buy at least three items from one of our premium brands and get
              20% off for one of the items of your choice.
            </p>
            <span class="hidden-link"
              ><a href="http://google.pl/" target="_blank"
                >Go to the shop</a
              ></span
            >
          </div>
        </div>
      </div>
    </div>

    <div class="section-coupon-get-overlay">
      <p class="button-get get-section">GET FREE WORLDWIDE SHIPPING</p>
    </div>

    <div
      class="section-overlay section-all-vouchers-overlay all"
      id="exampleVouchers"
    >
      <div class="name-section" id="all">
        <h2>OTHER COUPONS AVAILABLE</h2>
      </div>
    </div>

    <div class="popup">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div class="popup-header"></div>

        <div class="model-main">
          <div class="model-code-place">
            <input type="text" class="input-code voucherify-code" />
          </div>
          <div id="demo" class="container">
            <div id="voucher-checkout"></div>
            <div id="voucher-code"></div>
          </div>
          <div class="model-copy-code">
            <a href="#" onclick="copyVoucherifyCode()" class="copy-code"
              >COPY CODE</a
            >
          </div>
        </div>

        <div class="popup-content"></div>

        <div class="footer-link"></div>
      </div>
    </div>

    <script>
      const Voucherify = window.Voucherify;

      Voucherify.initialize(
        "9cf4abeb-f637-4360-b375-891c8173929f",
        "54824629-59d5-49e9-98b8-94c9658e06f5"
      );

      const customer = {
        source_id: "test@wp.pl"
      };

      Voucherify.publish(
        "voucherify-redemption-example",
        { customer },
        response => {
          console.log(response);
          var codeV = response.voucher.code;
          console.log(codeV);
          document.getElementById("hidden-code-unique1").innerHTML = codeV;
        }
      );

      Voucherify.publish(
        "voucherify-redemption-example",
        { customer },
        response => {
          console.log(response);
          var codeV2 = response.voucher.code;
          console.log(codeV2);
          document.getElementById("hidden-code-unique2").innerHTML = codeV2;
        }
      );

      Voucherify.publish(
        "voucherify-redemption-example",
        { customer },
        response => {
          console.log(response);
          var codeV3 = response.voucher.code;
          console.log(codeV3);
          document.getElementById("hidden-code-unique3").innerHTML = codeV3;
        }
      );

      const vouchersListPromise = new Promise(resolve =>
        Voucherify.listVouchers(
          {
            campaign: "voucherify-redemption-example",
            limit: 9,
            page: 1
          },
          response => resolve(response.vouchers)
        )
      );

      vouchersListPromise.then(vouchers => {
        const rows = [
          vouchers.slice(0, 3),
          vouchers.slice(3, 6),
          vouchers.slice(6, 9)
        ];

        const container = document.getElementById("exampleVouchers");
        const elements = rows
          .map(createRowOfVoucherBoxes)
          .forEach(el => container.appendChild(el));
      });

      const createVoucherBox = voucher => {
        // TODO:
        // 1. create such a box element in plain HTML (let it be display:none). Let's call it a template.
        // 2. use element.cloneNode() or jQuery.clone() to instantiate a copy of that template.
        // 3. enhance the copy with any javascript it needs (e.g. click handlers)
        // 4. make the copy display:block
        // 5. return the copy

        const voucherElement = document.createElement("div");
        voucherElement.onclick = function() {
          displayPopup({
            code: voucher.code,
            link:
              "<a href='http://google.pl' target='_blank'>Go to the shop</a>",
            header: "In vitae odio fermentum, posuere nunc sit amet",
            content:
              "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam maximus ultrices massa, ut sodales urna consectetur ut."
          });
        };

        voucherElement.className = `column ${
          voucher.active ? "active" : "notActive"
        }`;
        voucherElement.setAttribute(
          "title",
          voucher.active
            ? "active, redeemable voucher"
            : "disabled voucher, will raise validation error"
        );
        const span = document.createElement("span");
        span.appendChild(document.createTextNode(voucher.code));
        span.setAttribute("class", "vouchers-style");
        var name = document.createElement("span");
        name.appendChild(document.createTextNode(""));
        name.setAttribute("class", "inf-style");
        voucherElement.appendChild(span);
        voucherElement.insertBefore(name, span);
        var stylePopup = document.createElement("a");
        stylePopup.className = "stylePopup";
        stylePopup.appendChild(voucherElement);
        return stylePopup;
      };

      const createRowOfVoucherBoxes = vouchers => {
        const row = document.createElement("li");
        row.className = "row";
        vouchers.map(createVoucherBox).forEach(el => row.appendChild(el));
        return row;
      };

      /* WINDOW POPUP */
      document.querySelectorAll(".grid-element").forEach(el => {
        el.onclick = () => {
          const code = el.querySelector(".hidden-code").innerText;
          const content = el.querySelector(".hidden-content").innerText;
          const header = el.querySelector(".hidden-header").innerText;
          const link = el.querySelector(".hidden-link").innerHTML;
          displayPopup({ code, content, header, link });
        };
      });

      const displayPopup = ({ code = "", content, header, link }) => {
        document.querySelector(".popup .voucherify-code").value = code;
        document.querySelector(".popup .popup-content").innerHTML = content;
        document.querySelector(".popup .popup-header").innerHTML = header;
        document.querySelector(".popup .footer-link").innerHTML =
          "<a href>" + link + "</a>";
        document.querySelector(".popup").style.display = "block";
      };

      const hidePopup = () => {
        document.querySelector(".popup").style.display = "none";
      };

      var popup = $(".popup");
      var popupWindow = document.querySelectorAll(".popup");
      for (let i = 0; i < popupWindow.length; i++) {
        var popup = $(".popup");
        var pw = popupWindow[i];
        pw.onclick = function(event) {
          if (event.target == popup) {
            document.querySelector(".popup").style.display = "none";
          }
        };
      }

      document.querySelector(".close").onclick = hidePopup;
      function copyVoucherifyCode() {
        document.querySelector(".popup .voucherify-code").select();
        document.execCommand("copy");
      }

      // 'get-section'
      document.querySelector(".get-section").onclick = () => {
        displayPopup({
          code: "get-free-Q2x5r8c",
          link: "<a href='http://google.pl' target='_blank'>Go to the shop</a>",
          header: "GET FREE WORLDWIDE SHIPPING",
          content:
            "Fill in a questionnaire and help us improve our services to earn free worldwide shipping!"
        });
      };

      // scroll
      $(".header-menu")
        .find("a")
        .click(function(e) {
          e.preventDefault();
          var section = $(this).attr("href");
          $("html, body").animate({
            scrollTop: $(section).offset().top
          });
        });
    </script>
  </body>
</html>
